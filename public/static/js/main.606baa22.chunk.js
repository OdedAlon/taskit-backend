(this.webpackJsonptaskit=this.webpackJsonptaskit||[]).push([[0],{186:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(16),c=a.n(s),o=(a(186),a(14)),i=a(3),d=a(5),l=a(6),u=a(9),p=a(8),b=a(12),h=a.n(b),j=a(17),m=a(162),g="/api/",v=a.n(m).a.create({withCredentials:!0}),f=function(e,t){return k(e,"GET",t)},O=function(e,t){return k(e,"POST",t)},x=function(e,t){return k(e,"PUT",t)};function k(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(h.a.mark((function e(t){var a,r,n,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,v({url:"".concat(g).concat(t),method:a,data:r,params:"GET"===a?r:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:if(e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),!e.t0.response||401!==e.t0.response.status){e.next=16;break}throw window.location.assign("/#/login"),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var C=a(163),N=a.n(C),S=function(){var e={setup:function(){return Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f("setup-session");case 4:!0;case 5:case"end":return e.stop()}}),e)})))()},on:function(t,a){return Object(j.a)(h.a.mark((function r(){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(w){r.next=3;break}return r.next=3,e.setup();case 3:w.on(t,a);case 4:case"end":return r.stop()}}),r)})))()},off:function(t){var a=arguments;return Object(j.a)(h.a.mark((function r(){var n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:null,w){r.next=4;break}return r.next=4,e.setup();case 4:n?w.off(t,n):w.removeAllListeners(t);case 5:case"end":return r.stop()}}),r)})))()},emit:function(t,a){return Object(j.a)(h.a.mark((function r(){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(w){r.next=3;break}return r.next=3,e.setup();case 3:w.emit(t,a);case 4:case"end":return r.stop()}}),r)})))()},terminate:function(){w=null,!1}};return e}();window.socketService=S;var w=N()("",{reconnection:!1});var T={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],a="";for(;e>0;)e--,a+=t[Math.floor(Math.random()*t.length)]+" ";return a},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}};var D={query:function(e){return E.apply(this,arguments)},getById:function(e){return M.apply(this,arguments)},addBoard:function(e,t,a){return _.apply(this,arguments)},updateBoard:function(e){return L.apply(this,arguments)}};function E(){return(E=Object(j.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("board",t);case 2:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(j.a)(h.a.mark((function e(t){var a,r,n,s,c,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,f("board/".concat(t));case 3:for(r=e.sent,n=B(r),s=n.groups.map((function(e){return e.cards.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}))})),c=0;c<s.length;c++)n.groups[c].cards=s[c];return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(j.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board/".concat(t._id),t);case 2:return a=e.sent,S.emit("board update",t),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return JSON.parse(JSON.stringify(e))}function _(){return(_=Object(j.a)(h.a.mark((function e(t,a,r){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r?(n=B(r)).isTemplate=!1:n={title:t,isArchived:!1,isTemplate:!1,labels:[{id:"l101",name:"Teamwork",color:"green"},{id:"l102",name:"Urgent",color:"yellow"},{id:"l103",name:"Pay attention",color:"orange"},{id:"l104",name:"Important",color:"red"},{id:"l105",name:"Default",color:"purple"},{id:"l106",name:"Default",color:"blue"}],activities:[],createdBy:{fullname:"mike awsome",imgUrl:"https://robohash.org/5f6a2528973d861c5d78c355?set=set4"},style:{id:T.makeId(),fontClr:"#f9f9f9",bgImg:a},members:[{_id:"5f6a2528973d861c5d78c355",fullname:"Puki Ben David",imgUrl:"https://robohash.org/5f6a2528973d861c5d78c355?set=set4"},{_id:"5f6a2532173d861c5d78c332",fullname:"Mike Awsome",imgUrl:"https://robohash.org/5f6a2528973d861c5d78c355?set=set4"},{_id:"5f6a2532173d861c5d78c321",fullname:"Tuki Taka",imgUrl:"https://robohash.org/5f6a2528973d861c5d78c355?set=set4"}],groups:[{id:T.makeId(),title:"My new group!",archivedAt:!1,cards:[]}]},e.next=3,O("board",n);case 3:return n=e.sent,e.abrupt("return",Promise.resolve(B(n)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return function(){var a=Object(j.a)(h.a.mark((function a(r){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.getById(e,t);case 3:return n=a.sent,r({type:"SET_BOARD",board:n}),a.abrupt("return",n);case 8:a.prev=8,a.t0=a.catch(0),console.log("BoardActions: err in loadBoard",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}function I(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(){var s=Object(j.a)(h.a.mark((function s(c){var o,i,d,l,u;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,o=U(a),e.id?(i=o.groups.findIndex((function(e){return e.id===t})),d=o.groups[i].cards.findIndex((function(t){return t.id===e.id})),o.groups[i].cards[d]=e,r&&(o=F(o,e,r,n))):((l=R(t)).title=e.title,u=o.groups.findIndex((function(e){return e.id===t})),o.groups[u].cards.push(l),r&&(o=F(o,l,r,n))),c({type:"SET_BOARD",board:o}),s.next=6,D.updateBoard(o);case 6:s.next=12;break;case 8:s.prev=8,s.t0=s.catch(0),c({type:"SET_BOARD",board:a}),console.log("BoardActions: Cannot perform the change, Error in ".concat(e.id?"update card":"add card"," ").concat(s.t0));case 12:case"end":return s.stop()}}),s,null,[[0,8]])})));return function(e){return s.apply(this,arguments)}}()}function P(e){return function(){var t=Object(j.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",board:r}),t.next=5,D.updateBoard(r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function U(e){return JSON.parse(JSON.stringify(e))}function R(e){return{id:T.makeId(),members:[],labels:[],attachments:[],checklist:[],currGroup:{groupId:e},createdAt:Date.now()}}function G(e,t){return e.groups.find((function(e){return e.id===t}))}function F(e,t,a,r){var n={id:T.makeId(),txtCard:"",txtBoard:"",commentTxt:"",createdAt:Date.now(),byMember:{fullname:"Gad Refaeli",imgUrl:"https://res.cloudinary.com/taskit-sprint/image/upload/v1622668300/members%20taskit/gad_ljlro4.jpg",_id:"5f6a2532173d861c5d78c321"}};switch(a){case"ADD_CARD":var s=G(e,t.currGroup.groupId);n.txtCard="added this card to ".concat(s.title," "),n.txtBoard="added ".concat(t.title," to ").concat(s.title," "),n.card={id:t.id,title:t.title};break;case"ADD_MEMBER":var c=G(e,t.currGroup.groupId);n.txtCard=" added ".concat(r.fullname," to this card "),n.txtBoard=" added ".concat(r.fullname," to ").concat(c.title," "),n.card={id:t.id,title:t.title};break;case"REMOVE_MEMBER":var o=G(e,t.currGroup.groupId);n.txtCard=" removed ".concat(r.fullname," to this card "),n.txtBoard=" removed ".concat(r.fullname," to ").concat(o.title," "),n.card={id:t.id,title:t.title};break;case"ADD_CHECKLIST":var i=G(e,t.currGroup.groupId);n.txtCard=" added ".concat(r.title," to this card "),n.txtBoard=" added ".concat(r.title," to ").concat(i.title," "),n.card={id:t.id,title:t.title};break;case"REMOVE_CHECKLIST":var d=G(e,t.currGroup.groupId);n.txtCard=" removed ".concat(r.title," from this card "),n.txtBoard=" removed ".concat(r.title," from ").concat(d.title," "),n.card={id:t.id,title:t.title};break;case"ADD_GROUP":n.txtBoard=" added ".concat(t.title," to this board ");break;case"REMOVE_GROUP":n.txtBoard=" archived list ".concat(t.title," ");break;case"COMPLETE_TASK":var l=G(e,t.currGroup.groupId);n.txtCard=" completed ".concat(r.title," on this card "),n.txtBoard=" completed ".concat(r.title," on ").concat(l.title," "),n.card={id:t.id,title:t.title};break;case"INCOMPLETE_TASK":var u=G(e,t.currGroup.groupId);n.txtCard=" marked ".concat(r.title," incomplete on this card "),n.txtBoard=" marked ".concat(r.title," incomplete on ").concat(u.title," "),n.card={id:t.id,title:t.title};break;case"COMPLETE_DUEDATE":var p=G(e,t.currGroup.groupId);n.txtCard=" marked the due date complete ",n.txtBoard=" marked the due date on ".concat(p.title," complete "),n.card={id:t.id,title:t.title};break;case"INCOMPLETE_DUEDATE":var b=G(e,t.currGroup.groupId);n.txtCard=" marked the due date incomplete ",n.txtBoard=" marked the due date on ".concat(b.title," incomplete "),n.card={id:t.id,title:t.title};break;case"ATTACHMENT":var h=G(e,r.currGroup.groupId);n.attachment=" attached ".concat(t.attachments[0]," to this card "),n.txtBoard=" attached ".concat(t.attachments[0]," to ").concat(h.title," "),n.card={id:r.id,title:r.title}}return e.activities.unshift(n),e}var V=a(27),Q=a(22),z=a(41),K=a(1);function H(){return Object(K.jsx)("header",{className:"main-header",children:Object(K.jsxs)("nav",{children:[Object(K.jsxs)("div",{className:"main-header-left",children:[Object(K.jsx)(V.c,{exact:!0,to:"/",children:Object(K.jsx)("button",{className:"more-apps main-nav-btn"})}),Object(K.jsx)(V.c,{exact:!0,to:"/",children:Object(K.jsx)("button",{className:"home main-nav-btn"})}),Object(K.jsx)(V.c,{className:"boards main-nav-btn",to:"/boards",children:Object(K.jsx)("span",{children:"Boards"})})]}),Object(K.jsx)("div",{className:"logo"}),Object(K.jsxs)("div",{className:"main-header-right",children:[Object(K.jsx)(V.c,{to:"/about",children:Object(K.jsx)("button",{className:"create-board main-nav-btn"})}),Object(K.jsx)("button",{className:"about main-nav-btn"}),Object(K.jsx)(V.c,{to:"/about",children:Object(K.jsx)("button",{className:"notifications main-nav-btn"})}),Object(K.jsx)("div",{className:"user-img",children:"G"})]})]})})}var J=a(26);var q=a(23);function W(e){var t=e.member.fullname.split(" ").map((function(e){return e[0]}));return t=t.slice(0,2),Object(K.jsx)(K.Fragment,{children:e.member.imgUrl?Object(K.jsx)("span",{className:"user-img-chat-large",style:{backgroundImage:"url(".concat(e.member.imgUrl,")")}}):Object(K.jsx)("span",{className:"user-img-chat",children:t})})}var X=a(62),Y=a.n(X);function Z(e){var t=e.activities;return t?Object(K.jsx)("span",{className:"activity-list",children:t.map((function(e){return Object(K.jsx)("div",{className:"activity-list-container",children:Object(K.jsxs)("div",{className:"activity-list-container-icon-txt",children:[Object(K.jsx)(W,{member:e.byMember,size:"small"}),Object(K.jsxs)("div",{className:"activity-list-content",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{className:"activity-list-name",children:e.byMember.fullname.split(" ")[0]}),Object(K.jsxs)("span",{className:"activity-list-txt",children:[e.txtBoard," "]})]}),Object(K.jsx)("span",{className:"activity-list-time",children:Object(K.jsx)(Y.a,{fromNow:!0,children:e.createdAt})})]})]})},e.id)}))}):Object(K.jsx)(K.Fragment,{})}var $=a.p+"static/media/loder.e96c5e0e.gif",ee=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={title:"",board:null,prevTitle:"",filterBy:"",isMenuOn:!1,isEditing:!1,isSetBackGround:!1},e.inputRef=n.a.createRef(),e.toggleMenu=function(){var t=e.state.isMenuOn;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isMenuOn:!t,isSetBackGround:!1}))},e.toggleSetBackGround=function(){var t=e.state.isSetBackGround;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isSetBackGround:!t}))},e.toggleEdditing=function(){var t=e.state.isEditing;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isEditing:!t}))},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},Object(q.a)({},r,n))),"filterBy"===r&&e.props.onSetFilter(n)},e.handleKeyPress=function(t){"Enter"===t.key&&e.onSubmit()},e.onSubmit=function(){if(e.state.isEditing){if(!e.state.title)return void e.setState({title:e.state.prevTitle});e.setState({prevTitle:e.state.title}),e.props.onUpdateBoard("title",e.state.title),e.toggleEdditing()}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({board:this.props.board,title:this.props.board.title,prevTitle:this.props.board.title})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isMenuOn,r=t.isSetBackGround,n=t.isEditing,s=t.title;return this.props.board?Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("div",{className:"borad-nav",children:[Object(K.jsxs)("div",{className:"borad-nav-left",children:[!n&&Object(K.jsx)("h1",{onClick:this.toggleEdditing,children:this.props.board.title}),n&&Object(K.jsx)("input",{className:"borad-nav-title-edit",type:"text",name:"title",value:s,ref:this.inputRef,onBlur:this.onSubmit,placeholder:"Board's name...",onChange:this.handleChange,onKeyPress:this.handleKeyPress,onFocus:function(e){return e.target.select()}}),Object(K.jsx)("input",{type:"search",name:"filterBy",value:this.state.filterBy,placeholder:"Search Cardes...",onChange:this.handleChange})]}),Object(K.jsx)("button",{className:"show-menu",onClick:this.toggleMenu,children:"Show menu"}),a&&!r&&Object(K.jsxs)("div",{className:"side-menu",children:[Object(K.jsxs)("div",{className:"side-menu-title",children:[Object(K.jsx)("h1",{children:"Menu"}),Object(K.jsx)("p",{className:"side-menu-close",onClick:this.toggleMenu})]}),Object(K.jsx)("button",{className:"about-this-board",children:" About this Board"}),Object(K.jsx)("button",{className:"change-background",onClick:this.toggleSetBackGround,children:" Change background"}),Object(K.jsx)(V.c,{to:"/dashboard/".concat(this.props.board._id),children:Object(K.jsx)("button",{className:"board-analysis",children:" Board Analysis"})}),Object(K.jsx)("button",{className:"labels",children:" Labels"}),Object(K.jsx)("div",{className:"edit-details-activity-header",children:Object(K.jsxs)("span",{children:[Object(K.jsx)("p",{className:"edit-details-activity-logo",children:Object(K.jsx)("div",{className:"activity-title",children:"Activitys"})}),Object(K.jsx)(Z,{activities:this.props.board.activities})]})})]}),a&&r&&Object(K.jsxs)("div",{className:"side-menu-background",children:[Object(K.jsxs)("div",{className:"side-menu-background-top",children:[Object(K.jsx)("p",{className:"side-menu-back",onClick:this.toggleSetBackGround}),Object(K.jsx)("h1",{children:"Set BackGround"}),Object(K.jsx)("p",{className:"side-menu-close",onClick:this.toggleMenu})]}),Object(K.jsx)("div",{className:"thumbnail",children:["https://res.cloudinary.com/taskit-sprint/image/upload/v1623190403/background%20for%20Taskit/new%20backgrond/skiers-ski-lift-mountain-resort-with-sky-mountains_sdskrm.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190411/background%20for%20Taskit/new%20backgrond/kirkjufell-sunrise-iceland-beautiful-landscape_arpirx.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319307/background%20for%20Taskit/background_6_lqcaex.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190435/background%20for%20Taskit/new%20backgrond/winter-dark-forest-snowy-landscape-with-fir-trees_c4fm2u.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190446/background%20for%20Taskit/new%20backgrond/beautiful-emerald-lake-yoho-national-park-british-columbia-canada_k3vy9c.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190445/background%20for%20Taskit/new%20backgrond/multicolored-large-balloons-sky-against-backdrop-beautiful-sunset_uauvt3.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190450/background%20for%20Taskit/new%20backgrond/godafoss-waterfall-sunset-winter-iceland_wjm5fe.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319331/background%20for%20Taskit/background_3_vbexy0.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319332/background%20for%20Taskit/background_20_quuo0j.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319336/background%20for%20Taskit/background_5_ymjrkv.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319336/background%20for%20Taskit/background_4_vzr9ec.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319325/background%20for%20Taskit/background_17_nktykt.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319326/background%20for%20Taskit/background_16_fiaoup.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319329/background%20for%20Taskit/background_2_gbvbi0.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319318/background%20for%20Taskit/background_15_fudzx7.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319322/background%20for%20Taskit/background_14_m8nec0.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319323/background%20for%20Taskit/background_18_zfjo3z.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319324/background%20for%20Taskit/background_19_frzs17.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319313/background%20for%20Taskit/background_11_beygjh.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319316/background%20for%20Taskit/background_12_cyljgs.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319318/background%20for%20Taskit/background_8_pfcpdw.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319318/background%20for%20Taskit/background_13_mg5pbg.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319309/background%20for%20Taskit/background_10_isqnt4.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319309/background%20for%20Taskit/background_9_lyjw6z.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190431/background%20for%20Taskit/new%20backgrond/young-man-arms-outstretched-by-sea-sunrise-enjoying-freedom-life-people-travel-wellbeing-concept_cxydma.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622319310/background%20for%20Taskit/background_7_kdnduh.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190383/background%20for%20Taskit/new%20backgrond/underwater-landscape_rjewvj.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1623190400/background%20for%20Taskit/new%20backgrond/phi-phi-island-ocean-thailand_ethdby.jpg"].map((function(t,a){return Object(K.jsx)("button",{onClick:function(){return e.props.onSetBackground(t)},style:{backgroundImage:"url(".concat(t,")")}},a)}))})]})]})}):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component),te=a(385),ae=a(394),re=a(387),ne=a(388),se=a(389),ce=a(390),oe=a(384),ie=a(392),de=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isDone:!1,isEditing:!1,txtValue:"",todo:null},e.handleChange=function(t){t.stopPropagation(),e.setState({isDone:t.target.checked},(function(){Object(i.a)({},e.props.card).txtValue=e.state.txtValue}))},e.toggleEditing=function(){e.setState({isEditing:!e.state.isEditing})},e.removeText=function(){e.setState({txtValue:""})},e.getTodoClassName=function(){var t=e.state.isDone?"todo-done":"todo-not-done";return"checklist-todo-title ".concat(t)},e.onSubmit=function(t){t.preventDefault(),e.updateChecklist()},e.updateTodo=function(){var t=e.props.todo;if(t){var a=t.title,r=t.isDone;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isDone:r,txtValue:a}))}},e.onChange=function(t){t.stopPropagation(),e.setState({txtValue:t.target.value})},e.onRemove=function(){e.props.todo.title="",e.props.onUpdateChecklist(e.props.todo)},e.updateChecklist=function(){var t=e.state,a=t.isDone,r=t.txtValue,n={id:e.props.todo?e.props.todo.id:T.makeId(),isDone:a,title:r};e.props.onUpdateChecklist(n)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateTodo()}},{key:"componentDidUpdate",value:function(e,t){t.txtValue===this.state.txtValue&&t.isDone===this.state.isDone||this.updateChecklist(this.state.checklist)}},{key:"render",value:function(){return!this.props.displayCompleted&&this.state.isDone?Object(K.jsx)(n.a.Fragment,{}):this.state.isEditing?Object(K.jsxs)("div",{className:"checklist-todo flex",children:[Object(K.jsx)(ie.a,{color:"primary",checked:this.state.isDone,className:"checkbox-todo"}),Object(K.jsxs)("form",{onBlur:this.toggleEditing,onSubmit:this.onSubmit,children:[Object(K.jsx)("input",{className:"checkbox-text-edit",type:"text",autoFocus:!0,value:this.state.txtValue,onChange:this.onChange}),Object(K.jsx)("button",{className:"save-btn",type:"submit",children:"Save"})]})]}):Object(K.jsxs)("div",{className:"checklist-todo flex",children:[Object(K.jsx)(ie.a,{color:"primary",checked:this.state.isDone,onChange:this.handleChange,className:"checkbox-todo"}),Object(K.jsxs)("div",{className:this.getTodoClassName(),onClick:this.toggleEditing,children:[this.state.txtValue,Object(K.jsx)(oe.a,{onClick:this.onRemove})]})]})}}]),a}(r.Component),le=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isEditing:!1,todo:{title:"",isDone:!1}},e.inputRef=n.a.createRef(),e.onToggleMode=function(){var t=e.state.isEditing;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isEditing:!t}))},e.handleChange=function(t){var a=t.target.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{todo:{title:a}}))},e.onEnter=function(t){if("Enter"===t.key){var a=e.state.todo;if(!a.title||" "===a.title.charAt(0)||"\n"===a.title.charAt(0))return void e.setState(Object(i.a)(Object(i.a)({},e.state),{},{todo:{title:""}}));t.preventDefault(),e.onAddTodo(),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{card:{title:""}}))}},e.onSubmit=function(t){t.preventDefault();var a=e.state.todo;a.title&&" "!==a.title.charAt(0)&&(e.onAddTodo(),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{todo:{title:""}})))},e.onAddTodo=function(){e.props.onUpdateChecklist(e.state.todo)},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.state.isEditing&&this.inputRef.current.focus()}},{key:"render",value:function(){var e=this.state,t=e.isEditing,a=e.todo.title;return Object(K.jsxs)(n.a.Fragment,{children:[!t&&Object(K.jsx)("div",{className:"todo-add-edit",children:Object(K.jsx)("p",{className:"todo-add-txt",onClick:this.onToggleMode,children:"Add an item"})}),t&&Object(K.jsx)("div",{className:"todo-add-edit",children:Object(K.jsxs)("form",{action:"",children:[Object(K.jsx)("textarea",{type:"text",ref:this.inputRef,value:a,placeholder:"Enter a title...",onKeyPress:this.onEnter,onChange:this.handleChange}),Object(K.jsx)("div",{className:"todo-add-btn",children:Object(K.jsxs)("span",{className:"left-btn flex align-center",children:[Object(K.jsx)("button",{className:"checklist-add-edit-btn",onClick:this.onSubmit,children:"Add"}),Object(K.jsx)("button",{className:"card-add-exit-btn",onClick:this.onToggleMode})]})})]})})]})}}]),a}(r.Component),ue=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={tasksCompleted:0,totalTasks:0,displayCompleted:!0,showDialog:!1,isNew:!1,isEditing:!1,checklist:null,todo:null,txtValue:""},e.setTasksStatus=function(){var t=0,a=0;e.props.list.todos.forEach((function(e){e.isDone&&(t+=1),a+=1})),e.setState({tasksCompleted:t,totalTasks:a})},e.toggleEditing=function(){e.setState({isEditing:!e.state.isEditing})},e.handleChange=function(t){t.stopPropagation(),e.setState({txtValue:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.updateNewTodo()},e.updateNewTodo=function(){var t={id:T.makeId(),isDone:!1,title:e.state.txtValue};e.setState({todo:t}),e.onUpdateChecklist(t)},e.toggleDisplayCompleted=function(){return e.state.displayCompleted?e.setState({displayCompleted:!1}):e.setState({displayCompleted:!0})},e.getDisplayCheckedBtn=function(){return e.state.tasksCompleted?(t=e.state.displayCompleted?"Hide Completed Items":"Show Checked Items (".concat(e.state.tasksCompleted,")"),Object(K.jsx)("button",{onClick:e.toggleDisplayCompleted,children:t})):Object(K.jsx)(n.a.Fragment,{});var t},e.openDialog=function(){e.setState({showDialog:!0})},e.closeDialog=function(){e.setState({showDialog:!1})},e.getPrecentegesCompleted=function(){return Math.round(e.state.tasksCompleted/e.state.totalTasks*100)},e.onUpdateChecklist=function(t){if(t){var a=Object(o.a)(e.props.list.todos),r=a.findIndex((function(e){return e.id===t.id}));if(t.title)if(r<0)t.id=T.makeId(),a.push(t);else{a[r]=t,e.state.checklist.todos=a}else a.splice(r,1);var n=e.state.checklist;n.find((function(t){return t.id===e.props.list.id})).todos=a,r>=0?(t.isDone&&e.props.onUpdateCardProps("checklist",n,"COMPLETE_TASK",t),!t.isDone&&e.props.onUpdateCardProps("checklist",n,"INCOMPLETE_TASK",t)):e.props.onUpdateCardProps("checklist",n),e.setTasksStatus()}},e.onRemoveChecklist=function(){var t=e.state.checklist,a=e.props.list,r=t.findIndex((function(e){return e.id===a.id}));t.splice(r,1),e.props.onUpdateCardProps("checklist",t,"REMOVE_CHECKLIST",a),e.closeDialog()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setTasksStatus(),this.setState({checklist:this.props.card.checklist})}},{key:"render",value:function(){var e,t,a=this,r=this.props.list;return Object(K.jsxs)("div",{className:"checklist",onClick:function(e){e.stopPropagation()},children:[Object(K.jsxs)("div",{className:"checklist-title-container flex space-between",children:[Object(K.jsx)("h1",{className:"checklist-title",children:r.title}),Object(K.jsxs)("div",{className:"checklist-title-btns",children:[this.getDisplayCheckedBtn(),Object(K.jsx)("button",{onClick:this.openDialog,children:"Delete"})]})]}),this.state.totalTasks?Object(K.jsxs)("div",{className:"checklist-progress",children:[Object(K.jsxs)("div",{className:"checklist-progress-numbers",children:["%",this.getPrecentegesCompleted()]}),Object(K.jsx)(te.a,{value:this.getPrecentegesCompleted(),borderRadius:"5",variant:"determinate"})]}):Object(K.jsx)(n.a.Fragment,{}),Object(K.jsxs)("main",{className:"checklist-main",children:[null===(e=this.props)||void 0===e||null===(t=e.list)||void 0===t?void 0:t.todos.map((function(e){return Object(K.jsx)(de,{todo:e,card:a.props.card,board:a.props.board,onUpdateChecklist:a.onUpdateChecklist,displayCompleted:a.state.displayCompleted},e.id)})),Object(K.jsx)(le,{onUpdateChecklist:this.onUpdateChecklist})]}),Object(K.jsxs)(ae.a,{onClose:this.closeDialog,open:this.state.showDialog,children:[Object(K.jsx)(re.a,{id:"alert-dialog-title",children:"Remove this checklist?"}),Object(K.jsx)(ne.a,{children:Object(K.jsx)(se.a,{id:"alert-dialog-description",children:"Deleting a checklist is permanent and there is no way to get it back."})}),Object(K.jsxs)(ce.a,{children:[Object(K.jsx)(oe.a,{onClick:this.closeDialog,color:"primary",children:"Disagree"}),Object(K.jsx)(oe.a,{onClick:this.onRemoveChecklist,color:"primary",autoFocus:!0,children:"Agree"})]})]})]})}}]),a}(r.Component),pe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={checklist:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({checklist:this.props.checklist})}},{key:"render",value:function(){var e=this.props,t=e.onUpdateCardProps,a=e.board,r=e.card;return r.checklist&&r.checklist.length?Object(K.jsx)("div",{className:"checklists-container",children:r.checklist.map((function(e){return Object(K.jsx)(ue,{card:r,list:e,board:a,onUpdateCardProps:t},e.id)}))}):Object(K.jsx)(K.Fragment,{})}}]),a}(r.Component),be=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activities,a=e.card;return t?Object(K.jsx)("div",{className:"activity-list-card-container",children:t.map((function(e,t){return e.card&&e.card.id===a.id?Object(K.jsxs)("div",{className:"activity-list-card",children:[Object(K.jsx)(W,{member:e.byMember,size:"small"}),Object(K.jsxs)("div",{className:"activity-list-content",children:[e.txtCard&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{children:[Object(K.jsxs)("span",{className:"activity-list-name",children:[e.byMember.fullname.split(" ")[0]," "]}),Object(K.jsxs)("span",{className:"activity-list-txt",children:[e.txtCard," "]})]}),Object(K.jsx)("span",{className:"activity-list-time",children:Object(K.jsx)(Y.a,{fromNow:!0,children:e.createdAt})})]}),e.attachment&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{children:[Object(K.jsxs)("span",{className:"activity-list-name",children:[e.byMember.fullname.split(" ")[0]," "]}),Object(K.jsx)("a",{href:e.attachment,className:"activity-list-txt",children:"attachment"})]}),Object(K.jsx)("span",{className:"activity-list-time",children:Object(K.jsx)(Y.a,{fromNow:!0,children:e.createdAt})})]}),e.commentTxt&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{className:"activity-list-name",children:e.byMember.fullname.split(" ")[0]}),Object(K.jsx)("span",{className:"activity-list-time",children:Object(K.jsx)(Y.a,{fromNow:!0,children:e.createdAt})})]}),Object(K.jsxs)("span",{className:"activity-list-txt",children:[e.commentTxt," "]})]})]})]},t):Object(K.jsx)(K.Fragment,{})}))}):Object(K.jsx)(K.Fragment,{})}}]),a}(r.Component);function he(e){var t=e.members.map((function(e){var t=e.fullname.split(" ").map((function(e){return e[0]}));return t=t.slice(0,2),e.imgUrl?Object(K.jsx)("span",{className:"user-img-chat-large",style:{backgroundImage:"url(".concat(e.imgUrl,")")}}):Object(K.jsx)("span",{className:"user-img-chat-large",children:t})}));return Object(K.jsxs)("div",{className:"card-details-members",children:[Object(K.jsx)("h1",{children:"MEMBERS"}),Object(K.jsxs)("div",{className:"flex",children:[e.members.length>0&&t,Object(K.jsx)("div",{className:"card-details-members-open clickable",onClick:function(){return e.onToggle()}})]})]})}function je(e){var t=e.labels.map((function(e,t){return Object(K.jsx)("span",{className:"label-name ".concat("gray"!==e.color?e.color:"grayColor"),children:e.name},t)}));return Object(K.jsxs)("div",{className:"card-details-labels",children:[Object(K.jsx)("h1",{children:"LABELS"}),Object(K.jsxs)("div",{className:"flex",children:[e.labels.length>0&&t,e.labels.length>0&&Object(K.jsx)("div",{className:"card-details-labels-open clickable",onClick:function(){return e.onToggle()}})]})]})}var me=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={title:"Checklist"},e.inputRef=n.a.createRef(),e.handleChange=function(t){e.setState({title:t.target.value})},e.onAdd=function(){var t=e.props,a=t.card,r=t.onUpdateCardProps,n={id:T.makeId(),title:e.state.title,todos:[]};a.checklist||(a.checklist=[]),a.checklist.push(n),r("checklist",a.checklist,"ADD_CHECKLIST",n)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){var e=this.state.title;return Object(K.jsxs)("div",{className:"card-add-checklist ".concat(this.props.modalLoc),onClick:function(e){e.stopPropagation()},children:[Object(K.jsxs)("div",{className:"card-add-checklist-header",children:[Object(K.jsx)("p",{}),Object(K.jsx)("h3",{children:"Add checklist"}),Object(K.jsx)("button",{onClick:this.props.onToggle,className:"close-save-edit "})]}),Object(K.jsx)("h4",{children:"Title"}),Object(K.jsx)("input",{type:"txt",onFocus:function(e){return e.target.select()},ref:this.inputRef,placeholder:"Checlist name",value:e,onChange:this.handleChange}),Object(K.jsx)("div",{}),Object(K.jsx)("button",{onClick:this.onAdd,children:"Add"})]})}}]),a}(r.Component);function ge(e){var t=e.boardMember.fullname.split(" ").map((function(e){return e[0]}));t=t.slice(0,2);var a=!1;return e.cardMembers.length&&(a=Boolean(e.cardMembers.find((function(t){return t._id===e.boardMember._id})))),Object(K.jsxs)("div",{className:"board-member",onClick:function(t){t.stopPropagation(),e.toggleMember(e.boardMember,a),a=!a},children:[Object(K.jsxs)("div",{className:"clickable",children:[!e.boardMember.imgUrl&&Object(K.jsx)("span",{className:"user-img-chat-add",children:t}),Object(K.jsx)(W,{member:e.boardMember,size:"large"}),Object(K.jsx)("span",{children:e.boardMember.fullname})]}),a?Object(K.jsx)("p",{}):null]})}var ve=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={memberName:"",boardMembers:[]},e.inputRef=n.a.createRef(),e.onClickBoardMember=function(t,a){var r=e.props.card.members,n=Object(i.a)({},e.props.card);a?(r=r.filter((function(e){return e._id!==t._id})),n.removedMember=t,e.props.onUpdateCardProps("members",r,"REMOVE_MEMBER",t)):(r.push(t),n.addedMember=t,e.props.onUpdateCardProps("members",r,"ADD_MEMBER",t))},e.handleChange=function(t){e.setState({memberName:t.target.value})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({boardMembers:this.props.boardMembers})}},{key:"render",value:function(){var e=this,t=this.state.boardMembers;return t&&0!==t.length?(t=t.filter((function(t){return t.fullname.toLowerCase().includes(e.state.memberName.toLowerCase())})),Object(K.jsxs)("div",{className:"card-member-list ".concat(this.props.modalLoc),onClick:function(e){e.stopPropagation()},children:[Object(K.jsxs)("div",{className:"card-member-list-header",children:[Object(K.jsx)("p",{}),Object(K.jsx)("h3",{children:"Members"}),Object(K.jsx)("button",{onClick:this.props.onToggle,className:"close-save-edit "})]}),Object(K.jsx)("input",{type:"search",ref:this.inputRef,placeholder:"Search members",name:"memberName",value:this.state.memberName,onChange:this.handleChange}),Object(K.jsx)("h4",{children:"BOARD MEMBERS"}),t.map((function(t){return Object(K.jsx)(ge,{boardMember:t,cardMembers:e.props.card.members,toggleMember:e.onClickBoardMember},t._id)}))]})):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component);function fe(e){var t=!1;e.cardLabels.length&&(t=Boolean(e.cardLabels.find((function(t){return t.id===e.boardLabel.id}))));var a=e.boardLabel,r=a.name,n=a.color;return Object(K.jsx)("div",{className:"board-label",children:Object(K.jsxs)("div",{children:[Object(K.jsxs)("span",{className:"board-label-name ".concat("gray"!==n?n:"grayColor"," clickable"),onClick:function(a){a.stopPropagation(),e.toggleLabel(e.boardLabel,t),t=!t},children:[r,t?Object(K.jsx)("span",{className:"checked"}):null]}),Object(K.jsx)("p",{onClick:function(t){t.stopPropagation(),e.onClickEdit(e.boardLabel)}})]})})}var Oe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labelName:"",boardLabels:[],isEditing:!1,editedLabel:{}},e.colors=["green","yellow","orange","red","purple","blue","aqua","lightgreen","pink","deepblue","gray"],e.onClickBoardLabel=function(t,a){var r=e.props.card.labels;r||(r=[]),a?r=r.filter((function(e){return e.id!==t.id})):r.push(t),e.props.onUpdateCardProps("labels",r)},e.onClickEdit=function(t){e.setState({editedLabel:t}),e.setState({isEditing:!0})},e.onEditSubmit=function(t){var a=e.state.boardLabels,r=a.findIndex((function(e){return e.id===t.id}));a[r]=t,e.props.onUpdateBoardLabels(a)},e.handleChange=function(t){e.setState({labelName:t.target.value})},e.handleLabelNameChange=function(t){e.setState({editedLabel:Object(i.a)(Object(i.a)({},e.state.editedLabel),{},{name:t.target.value})})},e.onSetColor=function(t){e.setState({editedLabel:Object(i.a)(Object(i.a)({},e.state.editedLabel),{},{color:t})})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({boardLabels:this.props.boardLabels})}},{key:"render",value:function(){var e=this,t=this.state,a=t.boardLabels,r=t.isEditing;return a&&0!==a.length?(a=a.filter((function(t){return t.name.toLowerCase().includes(e.state.labelName.toLowerCase())})),r?Object(K.jsxs)("div",{className:"card-label-list ".concat(this.props.modalLoc),onClick:function(e){e.stopPropagation()},children:[Object(K.jsxs)("div",{className:"card-label-list-header",children:[Object(K.jsx)("p",{className:"btn-exp-edit-label clickable",onClick:function(){return e.setState({isEditing:!1})}}),Object(K.jsx)("h3",{children:"Change label"}),Object(K.jsx)("button",{onClick:this.props.onToggle,className:"close-save-edit btn-close-card-label"})]}),Object(K.jsx)("h4",{children:"Name"}),Object(K.jsx)("input",{type:"text",value:this.state.editedLabel.name,onChange:this.handleLabelNameChange}),Object(K.jsx)("h4",{children:"Select a color"}),Object(K.jsx)("div",{className:"label-colors",children:Object(K.jsxs)("div",{children:[this.colors.map((function(t){return Object(K.jsx)("span",{className:"label-color ".concat("gray"!==t?t:"grayColor"," \n                                ").concat(t===e.state.editedLabel.color?"select":null),onClick:function(){return e.onSetColor(t)},children:t===e.state.editedLabel.color?Object(K.jsx)("p",{}):null})})),Object(K.jsxs)("span",{className:"text-container",children:[Object(K.jsx)("p",{className:"text",children:"No color."}),Object(K.jsx)("p",{className:"text",children:" This won't show up on the front of cards."})]})]})}),Object(K.jsx)("button",{className:"btn-save",onClick:function(){return e.onEditSubmit(e.state.editedLabel)},children:"Save"})]}):Object(K.jsxs)("div",{className:"card-label-list ".concat(this.props.modalLoc),onClick:function(e){e.stopPropagation()},children:[Object(K.jsxs)("div",{className:"card-label-list-header",children:[Object(K.jsx)("p",{}),Object(K.jsx)("h3",{children:"Labels"}),Object(K.jsx)("button",{onClick:this.props.onToggle,className:"close-save-edit btn-close-card-label"})]}),Object(K.jsx)("input",{type:"search",placeholder:"Search labels",name:"labelName",value:this.state.labelName,onChange:this.handleChange}),Object(K.jsx)("h4",{children:"LABELS"}),a.map((function(t){return Object(K.jsx)(fe,{boardLabel:t,cardLabels:e.props.card.labels,toggleLabel:e.onClickBoardLabel,onClickEdit:e.onClickEdit},t.id)}))]})):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component),xe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cover:""},e.onSaveCover=function(t){e.props.onUpdateCardProps("cover",t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(K.jsxs)("div",{className:"card-cover-list ".concat(this.props.modalLoc),children:[Object(K.jsxs)("div",{className:"card-cover-list-header",children:[Object(K.jsx)("p",{}),Object(K.jsx)("h3",{children:"cover"}),Object(K.jsx)("button",{onClick:this.props.onToggle,className:"close-save-edit btn-close-card-cover"})]}),Object(K.jsx)("div",{className:"cover-btns",children:["https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_10_xkxb0s.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_9_epgs5d.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_3_fgx12a.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_8_sstdao.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_6_qxi41u.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_7_fuzn2p.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_2_etd492.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_4_ozwqlv.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_5_dxwxr7.jpg"].map((function(t,a){return Object(K.jsx)("div",{onClick:function(){return e.onSaveCover(t)},style:{backgroundImage:"url(".concat(t,")")}},a)}))})]})}}]),a}(r.Component);function ke(e){var t=e.modalType,a=e.board,r=e.modalLoc,n=e.card,s=e.onToggleModal,c=e.onUpdateCardProps,o=e.boardMembers,d=e.boardLabels,l=e.onUpdateBoardLabels,u=function(e){switch(t){case"members":return Object(K.jsx)(ve,Object(i.a)({},e));case"labels":return Object(K.jsx)(Oe,Object(i.a)({},e));case"checklist":return Object(K.jsx)(me,Object(i.a)({},e));case"cover":return Object(K.jsx)(xe,Object(i.a)({},e))}};return Object(K.jsx)(u,{card:n,board:a,modalLoc:r,onToggle:s,boardLabels:d,boardMembers:o,onUpdateCardProps:c,onUpdateBoardLabels:l})}var ye=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isDone:!1},e.handleChange=function(t){t.preventDefault();var a=e.props,r=a.card,n=a.onUpdateCardProps,s=t.target.checked;e.setState({isDone:s}),r.dueDate.isCompleted=s,!t.target.checked&&n("dueDate",r.dueDate,"INCOMPLETE_DUEDATE"),t.target.checked&&n("dueDate",r.dueDate,"COMPLETE_DUEDATE")},e.displayDueDate=function(){var t,a,r,n,s,c,o=e.props.card;return o.dueDate&&Object(K.jsx)("span",{children:new Date(null===o||void 0===o||null===(t=o.dueDate)||void 0===t?void 0:t.time).toString().split(" ")[1]+" "+new Date(null===o||void 0===o||null===(a=o.dueDate)||void 0===a?void 0:a.time).getUTCDate()+" at "+new Date(null===o||void 0===o||null===(r=o.dueDate)||void 0===r?void 0:r.time).getHours()+":"+(1===new Date(null===o||void 0===o||null===(n=o.dueDate)||void 0===n?void 0:n.time).getMinutes().toString().length?"0"+new Date(null===o||void 0===o||null===(s=o.dueDate)||void 0===s?void 0:s.time).getMinutes():new Date(null===o||void 0===o||null===(c=o.dueDate)||void 0===c?void 0:c.time).getMinutes())})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card;this.setState({isDone:e.dueDate.isCompleted})}},{key:"render",value:function(){var e=this.state.isDone;return Object(K.jsxs)("div",{className:"due-date-edit-preview",children:[Object(K.jsx)("h6",{children:"DUE DATE"}),Object(K.jsxs)("div",{className:"due-date-edit-preview-body",children:[Object(K.jsx)(ie.a,{checked:e,onChange:this.handleChange,className:"checkbox-todo"}),this.displayDueDate(),e&&Object(K.jsx)("div",{className:"completed",children:"COMPLETED"})]})]})}}]),a}(r.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labelName:"",boardLabels:[]},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(K.jsx)("div",{className:"card-preview-attachments",children:this.props.card.attachments.map((function(e,t){return Object(K.jsx)("img",{className:"card-preview-attachments-img-details",src:e,alt:""},t)}))})}}]),a}(r.Component),Ne=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={description:"",isEditing:!1},e.setDescriptionFromProps=function(){var t=e.props.description;t||(t=""),e.setState({description:t})},e.onChange=function(t){var a=t.target.value;e.setState({description:a})},e.toggleEditMode=function(){e.setState({isEditing:!e.state.isEditing})},e.onSave=function(){e.props.onUpdateCardProps("description",e.state.description),e.toggleEditMode()},e.descriptionText=function(){return e.state.description?e.state.description:"Add a more detailed description\u2026"},e.descriptionContainer=function(){return e.state.isEditing?Object(K.jsxs)("div",{children:[Object(K.jsx)("textarea",{className:"edit-details-description-textarea",value:e.state.description,autoFocus:!0,onChange:e.onChange,onBlur:e.onSave,placeholder:"Enter a more details description here..."}),Object(K.jsxs)("div",{className:"edit-details-description-btns",children:[Object(K.jsx)("button",{onClick:e.onSave,className:"save-btn",children:"Save"}),Object(K.jsx)("button",{className:"card-add-exit-btn",onClick:e.onToggleMode})]})]}):Object(K.jsx)("div",{className:"adit-details-description-textarea-continer",onClick:e.toggleEditMode,children:Object(K.jsx)("textarea",{className:"adit-details-description-textarea",value:e.state.description,placeholder:"Enter a more details description here...",onChange:e.onChange})})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setDescriptionFromProps()}},{key:"render",value:function(){return Object(K.jsx)("div",{className:"item-details-description",children:Object(K.jsx)("div",{children:this.descriptionContainer()})})}}]),a}(r.Component),Se=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditing:!1,group:null,card:null,data:null,prevTitle:""},e.onToggleMode=function(){var t=e.state.isEditing;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isEditing:!t}))},e.handleChange=function(t){var a=t.target.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{data:Object(i.a)(Object(i.a)({},e.state.data),{},{title:a})}))},e.onSubmit=function(){var t=e.state,a=t.prevTitle,r=t.data,n=t.card,s=t.group;if(!r.title)return e.setState(Object(i.a)(Object(i.a)({},e.state),{},{data:Object(i.a)(Object(i.a)({},r),{},{title:a})})),e.onToggleMode(),void e.setState(Object(i.a)(Object(i.a)({},e.state),{},{prevTitle:r.title}));e.onToggleMode(),n&&e.props.saveCard(r,r.currGroup.groupId,e.props.board),s&&e.props.onSaveGroup(r,e.props.board)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.card,a=e.group;a&&this.setState(Object(i.a)(Object(i.a)({},this.state),{},{group:a,prevTitle:a.title,data:Object(i.a)({},a)})),t&&this.setState(Object(i.a)(Object(i.a)({},this.state),{},{card:t,prevTitle:t.title,data:Object(i.a)({},t)}))}},{key:"render",value:function(){var e=this.state,t=e.group,a=e.card,r=e.data;return t||a?Object(K.jsx)("input",{className:"edit-details-textarea-header",data:"text",value:r.title,onBlur:this.onSubmit,onChange:this.handleChange}):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component),we=a(391);function Te(e){var t=e.onUpdateCardProps;function a(e){var a=e.target.value,r={};r.time=a,r.isCompleted=!1,t("dueDate",r)}return Object(K.jsx)("div",{children:Object(K.jsx)("form",{noValidate:!0,children:Object(K.jsx)(we.a,{onChange:a,onBlur:a,id:"datetime-local",label:"Due date",type:"datetime-local",InputLabelProps:{shrink:!1,required:!1,fullwidth:"true"}})})})}var De,Ee=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={commentTxt:"",isEditModeOn:!1},e.handleChange=function(t){var a=t.target.value;e.setState({commentTxt:a})},e.toggleEditMode=function(){e.state.isEditModeOn||e.setState({isEditModeOn:!e.state.isEditModeOn})},e.onSubmit=function(){e.props.card.commentTxt=e.state.commentTxt,e.setState({commentTxt:"",isEditModeOn:!e.state.isEditModeOn})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.commentTxt,a=e.isEditModeOn;return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("div",{className:"add-comment flex",children:[Object(K.jsx)("div",{className:"user-img-chat-add",children:"G"}),Object(K.jsx)("textarea",{onChange:this.handleChange,type:"text",value:t,onClick:this.toggleEditMode,placeholder:"Write a comment...",className:"edit-activity-description-textarea"}),a&&Object(K.jsx)("button",{className:" save-btn",onClick:this.onSubmit,children:"Save"})]})})}}]),a}(r.Component),Me={uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("taskit-sprint","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","f0p0ntfj"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return De=e.secure_url,e})).catch((function(e){return console.error(e)}))},getLastUplode:function(){return De}};var Le=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={imgUrl:null,height:500,width:500,isUploading:!1},e.uploadImg=function(){var t=Object(j.a)(h.a.mark((function t(a){var r,n,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.next=3,Me.uploadImg(a);case 3:r=t.sent,n=r.secure_url,s=r.height,c=r.width,e.setState({isUploading:!1,imgUrl:n,height:s,width:c}),(o=[]).push(n),e.props.onUpdateCardProps("attachments",o,"ATTACHMENT",e.props.card);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"uploadMsg",get:function(){var e=this.state,t=e.imgUrl,a=e.isUploading;return t?"Upload Another?":a?"Uploading....":"Upload Image"}},{key:"render",value:function(){return Object(K.jsx)("span",{className:"upload-preview",children:Object(K.jsx)("input",{type:"file",onChange:this.uploadImg,accept:"img/*",id:"imgUpload"})})}}]),a}(r.Component),Be=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={card:null,isCardDueDateShowenRight:!1,isDueDateListShowenLeft:!1,isNewTodoShown:!1,isModalShown:!1,modalType:"",modalLoc:""},e.onLoadCard=function(t){var a=e.props.board.groups.find((function(e){return e.cards.find((function(e){return e.id===t}))})),r=null===a||void 0===a?void 0:a.cards.find((function(e){return e.id===t}));e.setState({card:r})},e.onUpdateCardProps=function(t,a,r,n){var s=e.state.card;s[t]=a,e.setState({card:s}),e.props.saveCard(s,s.currGroup.groupId,e.props.board,r,n)},e.onUpdateBoardLabels=function(t){var a=e.props.board;a.labels=t,e.props.updateBoard(a)},e.onToggleDueDateRight=function(){e.setState({isDueDateListShowenRight:!e.state.isDueDateListShowenRight}),e.setState({isDueDateListShowenLeft:!1})},e.onToggleDueDateLeft=function(){e.setState({isDueDateListShowenLeft:!e.state.isDueDateListShowenLeft}),e.setState({isDueDateListShowenRight:!1})},e.onToggleModal=function(){e.setState({isModalShown:!e.state.isModalShown})},e.onCloseModals=function(t){t.stopPropagation(),!0===e.state.isModalShown&&e.setState({isModalShown:!1}),!0===e.state.isCardDueDateShowenRight&&e.setState({isCardDueDateShowenRight:!1}),!0===e.state.isCardDueDateShowenLeft&&e.setState({isCardDueDateShowenLeft:!1}),e.setState({isNewTodoShown:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.cardId;this.onLoadCard(e)}},{key:"render",value:function(){var e=this,t=this.state.card;return t?Object(K.jsx)("div",{className:"window-screen",onClick:function(){return e.props.history.push("/board/".concat(e.props.board._id))},children:Object(K.jsxs)("div",{className:"edit",onClick:this.onCloseModals,children:[t.cover&&Object(K.jsxs)("div",{children:[" ",Object(K.jsx)("img",{className:"card-details-cover",src:t.cover,alt:""})," "]}),Object(K.jsxs)("div",{className:"edit-contaner",children:[Object(K.jsxs)("div",{className:"edit-details-header",children:[Object(K.jsx)("p",{className:"edit-details-header-logo"}),Object(K.jsx)(Se,{card:t,saveCard:this.props.saveCard,board:this.props.board}),Object(K.jsx)("button",{className:t.cover?"close-save-edit-top-cover":"close-save-edit",onClick:function(){return e.props.history.push("/board/".concat(e.props.board._id))}})]}),Object(K.jsxs)("div",{className:"edit-body",children:[Object(K.jsxs)("div",{className:"edit-details",children:[Object(K.jsx)("span",{className:"list-pages",children:"In list pages"}),Object(K.jsxs)("div",{className:"flex members-labels-container",children:[Object(K.jsx)("div",{className:"flex column",children:t.members.length>0&&Object(K.jsx)("div",{children:Object(K.jsx)(he,{members:t.members,onToggle:function(){e.onToggleModal(),e.setState({modalType:"members",modalLoc:"modal-left"})}})})}),Object(K.jsx)("div",{className:"flex column",children:t.labels.length>0&&Object(K.jsx)("div",{children:Object(K.jsx)(je,{labels:t.labels,onToggle:function(){e.onToggleModal(),e.setState({modalType:"labels",modalLoc:"modal-left"})}})})}),Object(K.jsxs)("div",{className:"flex column",children:[t.dueDate&&Object(K.jsx)(ye,{card:t,board:this.props.board,onToggle:this.onToggleDueDateLeft,onUpdateCardProps:this.onUpdateCardProps}),Object(K.jsx)("div",{className:"card-date-pos",children:this.state.isCardMemberListShowenLeft&&Object(K.jsx)(ye,{card:t,board:this.props.board,onToggle:this.onToggleDueDateRight,onUpdateCardProps:this.onUpdateCardProps})})]})]}),Object(K.jsxs)("div",{className:"edit-details-description",children:[Object(K.jsxs)("div",{className:"edit-details-description-header",children:[Object(K.jsx)("p",{className:"edit-details-description-logo"}),Object(K.jsx)("h1",{children:"Description"})]}),Object(K.jsx)(Ne,{description:t.description,onUpdateCardProps:this.onUpdateCardProps,onSaveCard:this.onSaveCard})]}),Object(K.jsxs)("div",{className:"edit-details-attachments",children:[Object(K.jsxs)("div",{className:"edit-details-attachments-header",children:[Object(K.jsx)("p",{className:"edit-details-attachments-logo"}),Object(K.jsx)("h1",{children:"Attachments"})]}),Object(K.jsx)(Ce,{card:t})]}),Object(K.jsx)("div",{children:Object(K.jsx)(pe,{card:t,board:this.props.board,onUpdateCardProps:this.onUpdateCardProps})}),Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{className:"edit-details-activity-header",children:[Object(K.jsxs)("span",{children:[Object(K.jsx)("p",{className:"edit-details-activity-logo"}),Object(K.jsx)("h1",{children:"Activity"})]}),Object(K.jsx)("button",{children:"Show details"})]}),Object(K.jsxs)("div",{className:"edit-activity-description",children:[Object(K.jsx)(Ee,{card:t,board:this.props.board,onUpdateCardProps:this.onUpdateCardProps}),Object(K.jsx)("div",{children:Object(K.jsx)(be,{card:t,activities:this.props.board.activities})})]})]})]}),Object(K.jsxs)("div",{className:"edit-add-to-card",children:[Object(K.jsx)("h1",{children:" ADD TO CARD "}),Object(K.jsxs)("div",{className:"edit-add-to-card-btn-continer",children:[Object(K.jsx)("button",{className:"edit-add-to-card-members menu-btn",onClick:function(){e.onToggleModal(),e.setState({modalType:"members",modalLoc:"modal-right"})},children:" Members"}),Object(K.jsx)("button",{className:"edit-add-to-card-labels menu-btn",onClick:function(){e.onToggleModal(),e.setState({modalType:"labels",modalLoc:"modal-right"})},children:" Labels"}),Object(K.jsx)("button",{className:"edit-add-to-card-checklist menu-btn",onClick:function(){e.onToggleModal(),e.setState({modalType:"checklist",modalLoc:"modal-right"})},children:" Checklist"}),Object(K.jsxs)("button",{className:"edit-add-to-card-dates menu-btn",children:[" Dates",Object(K.jsx)("div",{className:"card-date-pos",children:Object(K.jsx)(Te,{dueDate:this.state.card.dueDate,onToggle:this.onToggleDueDateRight,onUpdateCardProps:this.onUpdateCardProps,card:t})})]}),Object(K.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onSubmit:this.onAttachmentFile}),Object(K.jsx)("label",{htmlFor:"raised-button-file",children:Object(K.jsxs)("button",{className:"edit-add-to-card-attachment menu-btn",children:["Attachment",Object(K.jsx)(Le,{card:t,onUpdateCardProps:this.onUpdateCardProps})]})}),Object(K.jsx)("button",{className:"edit-add-to-card-cover menu-btn",onClick:function(){e.onToggleModal(),e.setState({modalType:"cover",modalLoc:"modal-right"})},children:" Cover"}),this.state.isModalShown&&Object(K.jsx)(ke,{card:t,board:this.props.board,modalLoc:this.state.modalLoc,modalType:this.state.modalType,onToggleModal:this.onToggleModal,boardLabels:this.props.board.labels,boardMembers:this.props.board.members,onUpdateCardProps:this.onUpdateCardProps,onUpdateBoardLabels:this.onUpdateBoardLabels})]})]})]})]})]})}):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component);var _e={saveCard:I,updateBoard:P},Ae=Object(J.b)((function(e){return{board:e.boardModule.board}}),_e)(Be),Ie=a(72);function Pe(e){var t=e.onRemoveCard,a=e.card,n=e.index,s=e.onSaveCard,c=e.getActivitiesByCardId,o=e.onOpenPreviewLabels,d=e.isLebelOpen,l=e.board,u=(e.isQuickCardEditorOpen,e.toggelQuickEditor),p=Object(r.useState)(null),b=Object(Ie.a)(p,2),h=b[0],j=b[1],m=Object(r.useState)("card-preview-drag-right"),g=Object(Ie.a)(m,2),v=g[0],f=g[1];function O(e){var t=e.provided.draggableProps.style.transform,a=+(null===t||void 0===t?void 0:t.match(/\(.*\px,/g)[0].slice(1,-3));if(a!==h&&j(a),h&&h!==a){var r="card-preview-drag-".concat(h<a?"right":"left");return f(r),r}return v}function x(e){var t=0;return e.checklist.forEach((function(e){return e.todos.forEach((function(e){!0===e.isDone&&t++}))})),t}function k(e){var t=0;return e.checklist.forEach((function(e){return e.todos.forEach((function(e){t++}))})),t}return Object(K.jsx)(z.b,{draggableId:a.id,index:n,children:function(e,r){var n,p,b;return Object(K.jsx)("div",Object(i.a)(Object(i.a)(Object(i.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:r.isDragging?"":"card-preview",children:Object(K.jsxs)("div",{className:r.isDragging?O({provided:e}):"drag-flex",children:[a.cover&&Object(K.jsx)("div",{className:"card-preview-cover",style:{backgroundImage:"url(".concat(a.cover,")")}}),Object(K.jsxs)("div",{className:"card-preview-body",children:[Object(K.jsx)("div",{className:"card-preview-labels",onClick:o,children:null===a||void 0===a||null===(n=a.labels)||void 0===n?void 0:n.map((function(e,t){return Object(K.jsx)("div",{className:"card-preview-label ".concat(e.color," ").concat(d?"open":""),children:d&&Object(K.jsx)("span",{children:e.name})},t)}))}),Object(K.jsx)("button",{className:"card-preview-remove-btn",onClick:function(){return t(a)}}),Object(K.jsxs)(V.b,{to:"/board/".concat(l._id,"/").concat(a.id),children:[Object(K.jsx)("button",{className:"card-preview-edit-icon",onClick:function(){return u()}}),Object(K.jsxs)("div",{className:"test-white-space",children:[a.title," "]}),Object(K.jsx)("div",{className:"card-preview-attachments",children:null===a||void 0===a||null===(p=a.attachments)||void 0===p?void 0:p.map((function(e,t){return Object(K.jsx)("img",{className:"card-preview-attachments-img",src:e,alt:""},t)}))}),Object(K.jsxs)("div",{className:"card-preview-bottom",children:[Object(K.jsxs)("div",{className:"card-preview-bottom-list",children:[(null===a||void 0===a?void 0:a.attachments.length)>0&&Object(K.jsx)("span",{className:"card-attachment-icon"}),(null===a||void 0===a?void 0:a.checklist.length)>0&&Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("span",{className:"card-checklist-preview",children:[Object(K.jsx)("span",{className:"card-checklist-icon"}),Object(K.jsx)("span",{children:x(a)}),Object(K.jsx)("span",{children:"/"}),Object(K.jsx)("span",{children:k(a)})]})}),0!==c(a.id).length&&Object(K.jsx)("span",{className:"card-preview-activities ",children:c(a.id).length}),(null===a||void 0===a||null===(b=a.dueDate)||void 0===b?void 0:b.time)?Object(K.jsxs)("span",{onClick:function(e){return function(e){e.stopPropagation(),e.stopPropagation(),a.dueDate.isCompleted=!a.dueDate.isCompleted;var t=a.dueDate.isCompleted?"COMPLETE_DUEDATE":"INCOMPLETE_DUEDATE";s(a,a.currGroup.groupId,t)}(e)},className:a.dueDate.isCompleted?"card-preview-date checked":"card-preview-date not-checked",children:[Object(K.jsx)("div",{className:"card-preview-date-clock"}),new Date(a.dueDate.time).toString().split(" ")[1]+" "+new Date(a.dueDate.time).getUTCDate()]}):Object(K.jsx)("span",{}),a.description&&Object(K.jsx)("span",{className:"icon-desription"})]}),Object(K.jsx)("div",{className:"card-preview-members",children:a.members&&a.members.map((function(e,t){return Object(K.jsx)(W,{member:e,size:"small"},t)}))})]})]})]}),e.placeholder]})}))}})}function Ue(e){var t=e.onRemoveCard,a=e.group,r=e.getActivitiesByCardId,n=e.onSaveCard,s=e.onOpenPreviewLabels,c=e.isLebelOpen,o=e.board,d=e.isQuickCardEditorOpen,l=e.toggelQuickEditor;return Object(K.jsx)(z.c,{droppableId:a.id,type:"card",children:function(e){var u;return Object(K.jsxs)("div",Object(i.a)(Object(i.a)({className:"card-list-inner",ref:e.innerRef},e.droppableProps),{},{children:[Object(K.jsx)("div",{className:"card-container",children:null===(u=a.cards)||void 0===u?void 0:u.map((function(e,a){return Object(K.jsx)(Pe,{card:e,index:a,board:o,onSaveCard:n,isLebelOpen:c,onRemoveCard:t,toggelQuickEditor:l,onOpenPreviewLabels:s,isQuickCardEditorOpen:d,getActivitiesByCardId:r},e.id)}))}),e.placeholder]}))}})}var Re=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isEditing:!1,card:{title:""}},e.inputRef=n.a.createRef(),e.onToggleMode=function(){var t=e.state.isEditing;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isEditing:!t}))},e.handleChange=function(t){var a=t.target.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{card:{title:a}}))},e.onEnter=function(t){if("Enter"===t.key){var a=e.state.card;if(!a.title||" "===a.title.charAt(0)||"\n"===a.title.charAt(0))return void e.setState(Object(i.a)(Object(i.a)({},e.state),{},{card:{title:""}}));t.preventDefault(),e.onAddCard(),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{card:{title:""}}))}},e.onSubmit=function(t){t.preventDefault();var a=e.state.card;a.title&&" "!==a.title.charAt(0)&&(e.onAddCard(),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{card:{title:""}})))},e.onAddCard=function(){var t=e.state.card;e.props.onSaveCard(e.state.card,e.props.group.id,"ADD_CARD"),t.currGroup={},t.currGroup.groupId=e.props.group.id},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.state.isEditing&&this.inputRef.current.focus()}},{key:"render",value:function(){var e=this.state,t=e.isEditing,a=e.card.title;return Object(K.jsxs)(n.a.Fragment,{children:[!t&&Object(K.jsx)("div",{className:"card-add-edit",children:Object(K.jsx)("p",{className:"card-add-txt",onClick:this.onToggleMode,children:"Add another card"})}),t&&Object(K.jsx)("div",{className:"card-add-edit",children:Object(K.jsxs)("form",{action:"",children:[Object(K.jsx)("textarea",{type:"text",ref:this.inputRef,value:a,placeholder:"Enter a title for this card...",onKeyPress:this.onEnter,onChange:this.handleChange}),Object(K.jsx)("div",{className:"card-add-btn",children:Object(K.jsxs)("span",{className:"left-btn",children:[Object(K.jsx)("button",{className:"card-add-edit-btn",onClick:this.onSubmit,children:"Add card"}),Object(K.jsx)("button",{className:"card-add-exit-btn",onClick:this.onToggleMode})]})})]})})]})}}]),a}(r.Component);function Ge(e){var t=e.onSaveGroup,a=e.onRemoveGroup,r=e.group,n=e.onRemoveCard,s=e.onSaveCard,c=e.index,o=e.getActivitiesByCardId,d=e.onOpenPreviewLabels,l=e.isLebelOpen,u=e.board,p=e.isQuickCardEditorOpen,b=e.toggelQuickEditor;return Object(K.jsx)(z.b,{draggableId:r.id,index:c,children:function(e){return Object(K.jsxs)("div",Object(i.a)(Object(i.a)(Object(i.a)({className:"group-preview"},e.dragHandleProps),e.draggableProps),{},{ref:e.innerRef,children:[Object(K.jsxs)("div",{className:"group-preview-header",children:[Object(K.jsx)(Se,{group:r,onSaveGroup:t,board:u}),Object(K.jsx)("button",{onClick:function(){a(r,u)},className:"group-preview-header-btn"})]}),Object(K.jsxs)("div",{className:"card-list-and-add",children:[Object(K.jsx)(Ue,{group:r,board:u,onSaveCard:s,isLebelOpen:l,onRemoveCard:n,toggelQuickEditor:b,onOpenPreviewLabels:d,isQuickCardEditorOpen:p,getActivitiesByCardId:o}),Object(K.jsx)(Re,{group:r,board:u,onSaveCard:s})]})]}))}})}var Fe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isEditing:!1,group:{title:""}},e.inputRef=n.a.createRef(),e.onToggleMode=function(){var t=e.state.isEditing;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isEditing:!t}))},e.handleChange=function(t){var a=t.target.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{group:{title:a}}))},e.onSubmit=function(t){(t.preventDefault(),e.state.group.title)&&((0,e.props.onSaveGroup)(e.state.group,e.props.board,"ADD_GROUP"),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{group:{title:""}})))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.state.isEditing&&this.inputRef.current.focus()}},{key:"render",value:function(){var e=this.state,t=e.isEditing,a=e.group.title;return Object(K.jsxs)(n.a.Fragment,{children:[!t&&Object(K.jsx)("div",{className:"group-add",children:Object(K.jsx)("p",{className:"add-txt",onClick:this.onToggleMode,children:"Add another list"})}),t&&Object(K.jsx)("div",{className:"group-add-edit",children:Object(K.jsxs)("form",{action:"",children:[Object(K.jsx)("input",{type:"text",ref:this.inputRef,value:a,onChange:this.handleChange,placeholder:"Enter list title..."}),Object(K.jsxs)("div",{className:"group-add-edit-btn",children:[Object(K.jsx)("button",{className:"add-list-btn",onClick:this.onSubmit,children:"Add list"}),Object(K.jsx)("button",{className:"censel-add-list-btn",onClick:this.onToggleMode})]})]})})]})}}]),a}(r.Component);function Ve(e){var t=e.board,a=e.onRemoveGroup,r=e.groups,n=e.onSaveCard,s=e.onRemoveCard,c=e.onSaveGroup,o=e.getActivitiesByCardId,d=e.onOpenPreviewLabels,l=e.isLebelOpen,u=e.isQuickCardEditorOpen,p=e.toggelQuickEditor;return Object(K.jsx)("div",{className:"group-list-container",children:Object(K.jsx)(z.c,{droppableId:t._id,direction:"horizontal",type:"group",children:function(e){return Object(K.jsxs)("div",Object(i.a)(Object(i.a)({},e.droppableProps),{},{ref:e.innerRef,className:"group-list",children:[null===r||void 0===r?void 0:r.map((function(e,r){return Object(K.jsx)(Ge,{group:e,index:r,board:t,onSaveCard:n,isLebelOpen:l,onSaveGroup:c,onRemoveCard:s,onRemoveGroup:a,toggelQuickEditor:p,onOpenPreviewLabels:d,isQuickCardEditorOpen:u,getActivitiesByCardId:o},e.id)})),e.placeholder,Object(K.jsx)(Fe,{board:t,onSaveGroup:c})]}))}})})}var Qe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currGroupIdx:null,isLebelOpen:!1,isQuickCardEditorOpen:!1,filterBy:""},e.onLoadBoard=function(){e.props.loadBoard(e.props.match.params.boardId,e.state.filterBy)},e.onUpdateBoard=function(t,a){var r=Object(i.a)({},e.props.board);r[t]=a,e.props.updateBoard(r),S.emit("board updated",{newBoard:r,id:r._id})},e.onUpdateBoard=function(t,a){var r=Object(i.a)({},e.props.board);r[t]=a,e.props.updateBoard(r)},e.onSetFilter=function(t){e.props.loadBoard(e.props.match.params.boardId,t)},e.onSaveGroup=function(t,a,r){return e.props.saveGroup(t,a,r)},e.toggelQuickEditor=function(){var t=e.state.isQuickCardEditorOpen;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{isQuickCardEditorOpen:!t}))},e.onRemoveGroup=function(t){return e.props.removeGroup(t,e.props.board,"REMOVE_GROUP")},e.onSaveCard=function(t,a,r){e.props.saveCard(t,a,e.props.board,r)},e.onRemoveCard=function(t){return e.props.removeCard(t,e.props.board)},e.onSetGroupIdx=function(t){var a;(a=e).setState.apply(a,Object(o.a)(e.state).concat([{currGroupIdx:t}]))},e.onOpenPreviewLabels=function(){e.setState({isLebelOpen:!e.state.isLebelOpen})},e.onSetBackground=function(t){var a=Object(i.a)(Object(i.a)({},e.props.board),{},{style:Object(i.a)(Object(i.a)({},e.props.board.style),{},{bgImg:t})});e.props.updateBoard(a)},e.getActivitiesByCardId=function(t){return e.props.board.activities.filter((function(e){var a;return(null===(a=e.card)||void 0===a?void 0:a.id)===t}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(h.a.mark((function e(){var t,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.boardId,e.prev=1,e.next=4,this.onLoadBoard();case 4:S.emit("join board",t),S.on("board updated",(function(e){a.props.updateBoardSockets(e)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Huge error",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e,t=this.props.board;return t?Object(K.jsxs)(K.Fragment,{children:[this.props.match.params.cardId?Object(K.jsx)(Ae,{cardId:this.props.match.params.cardId,history:this.props.history}):Object(K.jsx)("div",{}),Object(K.jsxs)("div",{className:"board",style:{backgroundImage:"url(".concat(null===t||void 0===t||null===(e=t.style)||void 0===e?void 0:e.bgImg,")")},children:[Object(K.jsx)("div",{className:"fade"}),Object(K.jsx)("div",{className:"borad-nav-color"}),Object(K.jsx)(ee,{board:t,props:this.props,onSetFilter:this.onSetFilter,loadBoard:this.props.loadBoard,onUpdateBoard:this.onUpdateBoard,updateBoard:this.props.updateBoard,onSetBackground:this.onSetBackground}),Object(K.jsx)("div",{className:"board-container",children:Object(K.jsx)(Ve,{board:t,groups:t.groups,onSaveCard:this.onSaveCard,onSaveGroup:this.onSaveGroup,onRemoveCard:this.onRemoveCard,onRemoveGroup:this.onRemoveGroup,isLebelOpen:this.state.isLebelOpen,toggelQuickEditor:this.toggelQuickEditor,onOpenPreviewLabels:this.onOpenPreviewLabels,getActivitiesByCardId:this.getActivitiesByCardId})})]})]}):Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]})}}]),a}(r.Component);var ze={saveCard:I,loadBoard:A,saveGroup:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var r=Object(j.a)(h.a.mark((function r(n){var s,c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=U(t),e.id?(c=t.groups.findIndex((function(t){return t.id===e.id})),s.groups[c]=e):(e.id=T.makeId(),e.cards=[],s.groups.push(e),s=F(s,e,a)),n({type:"SET_BOARD",board:s}),r.next=6,D.updateBoard(s);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("BoardActions: err in ".concat(e.id?"update group":"add group").concat(r.t0));case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},removeCard:function(e,t){return function(){var a=Object(j.a)(h.a.mark((function a(r){var n,s,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=U(t),s=n.groups.findIndex((function(t){return t.id===e.currGroup.groupId})),c=n.groups[s].cards.findIndex((function(t){return t.id===e.id})),n.groups[s].cards.splice(c,1),r({type:"SET_BOARD",board:n}),a.next=8,D.updateBoard(n);case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("BoardActions: err in removeCard",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},updateBoard:P,removeGroup:function(e,t,a){return function(){var r=Object(j.a)(h.a.mark((function r(n){var s,c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=U(t),c=s.groups.findIndex((function(t){return t.id===e.id})),s.groups.splice(c,1),s=F(s,e,a),n({type:"SET_BOARD",board:s}),r.next=8,D.updateBoard(s);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log("BoardActions: err in removeGroup",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()},updateBoardSockets:function(e){return function(){var t=Object(j.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",board:r})}catch(n){console.log("error updating board",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ke=Object(J.b)((function(e){return{board:e.boardModule.board}}),ze)(Qe),He=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={newboard:{title:"",backgroundURL:""}},e.handleChange=function(t){var a=t.target.value;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{newboard:Object(i.a)(Object(i.a)({},e.state.newboard),{},{title:a})}))},e.setBackground=function(t){e.setState(Object(i.a)(Object(i.a)({},e.state),{},{newboard:Object(i.a)(Object(i.a)({},e.state.newboard),{},{backgroundURL:t})}))},e.onSubmit=function(t){t.preventDefault();var a=e.state.newboard;a.title&&(e.props.onNewBoard(a.title,a.backgroundURL),e.setState(Object(i.a)(Object(i.a)({},e.state),{},{newboard:{title:"",backgroundURL:""}})),e.props.toggleModal())},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.newboard.title;return Object(K.jsx)(n.a.Fragment,{children:Object(K.jsx)("div",{className:"window-screen",children:Object(K.jsx)("div",{className:"board-add",children:Object(K.jsx)("div",{className:"board-add-modal",children:Object(K.jsxs)("form",{action:"",children:[Object(K.jsxs)("div",{className:"newboard-add-hedder",children:[Object(K.jsx)("input",{type:"text",ref:this.inputRef,value:t,placeholder:"Enter board title...",onKeyPress:this.onEnter,onChange:this.handleChange}),Object(K.jsx)("button",{className:"newboard-add-exit-btn",onClick:this.props.toggleModal})]}),Object(K.jsx)("div",{className:"board-add-btn",children:Object(K.jsx)("div",{className:"thumbnail",children:["https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_10_xkxb0s.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_9_epgs5d.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_3_fgx12a.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_8_sstdao.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_6_qxi41u.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555555/background%20for%20Taskit/Layer_7_fuzn2p.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_2_etd492.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_4_ozwqlv.jpg","https://res.cloudinary.com/taskit-sprint/image/upload/v1622555554/background%20for%20Taskit/Layer_5_dxwxr7.jpg"].map((function(t,a){return Object(K.jsx)("button",{className:e.state.newboard.backgroundURL===t?"active":"",onClick:function(){return e.setBackground(t)},style:{backgroundImage:"url(".concat(t,")")}},a)}))})}),Object(K.jsx)("button",{className:"newboard-add-edit-btn",onClick:this.onSubmit,children:"Add board"})]})})})})})}}]),a}(r.Component),Je=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={boards:null,addNewModal:!1},e.onLoadBoards=function(){e.props.loadBoards(),e.setState({boards:e.props.boards})},e.onNewBoard=function(t,a){return e.props.addBoard(t,a,e.props.history)},e.toggleModal=function(){var t=e.state.addNewModal;e.setState(Object(i.a)(Object(i.a)({},e.state),{},{addNewModal:!t}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onLoadBoards()}},{key:"render",value:function(){var e,t,a,r,n=this;if(!this.state.boards)return Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]});var s=null===(e=this.props)||void 0===e||null===(t=e.boards)||void 0===t?void 0:t.filter((function(e){return e.isTemplate})),c=null===(a=this.props)||void 0===a||null===(r=a.boards)||void 0===r?void 0:r.filter((function(e){return!e.isTemplate})),o=this.state.addNewModal;return Object(K.jsxs)("div",{className:"borads",children:[Object(K.jsx)("div",{className:"borads-background"}),Object(K.jsx)("div",{className:"home-nav"}),Object(K.jsx)("h2",{children:"TEMPLATES"}),Object(K.jsx)("h1",{className:"borads-container-title-a",children:"All Taskit Template"}),Object(K.jsxs)("div",{className:"borads-container",children:[s.map((function(e,t){return Object(K.jsxs)("div",{className:"borad-preview",style:{backgroundImage:"url(".concat(e.style.bgImg,")")},onClick:function(){return n.props.addBoard(e.title,e.style.bgImg,n.props.history,e)},children:[Object(K.jsx)("span",{className:"borad-preview-fade"}),Object(K.jsxs)("span",{className:"borad-preview-fade-text",children:[Object(K.jsx)("div",{className:"borad-preview-fade-template",children:"Template"}),e.title]})]},t)})),Object(K.jsx)("button",{className:"borads-container-add-btn",onClick:this.toggleModal,children:"Add new borad "})]}),Object(K.jsx)("h2",{children:"YOUR WORKSPACES"}),Object(K.jsx)("h1",{className:"borads-container-title-b",children:"Our Taskit Project"}),Object(K.jsx)("div",{className:"borads-container",children:c.map((function(e,t){return Object(K.jsx)(V.c,{to:"board/".concat(e._id,"?"),children:Object(K.jsxs)("div",{className:"borad-preview",style:{backgroundImage:"url(".concat(e.style.bgImg,")")},children:[Object(K.jsx)("span",{className:"borad-preview-fade"}),Object(K.jsx)("span",{className:"borad-preview-fade-text",children:e.title})," "]},e._id)},t)}))}),o&&Object(K.jsx)(He,{onNewBoard:this.onNewBoard,toggleModal:this.toggleModal,boards:this.props.boards,history:this.props.history})]})}}]),a}(r.Component);var qe={loadBoards:function(){return function(){var e=Object(j.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.query();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("BoardsActions: err in get board'}".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},addBoard:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var n=Object(j.a)(h.a.mark((function n(s){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,D.addBoard(e,t,r);case 3:c=n.sent,a.push("/board/".concat(c._id)),s({type:"ADD_BOARD",board:c}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("error adding board",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}},We=Object(J.b)((function(e){return{boards:e.boardModule.boards}}),qe)(Je),Xe=a(91),Ye=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).getRndHexColor=function(){return"#"+(1048575*Math.random()*1e6).toString(16).slice(0,6)},e.getDataForChart=function(t){var a=Object.keys(t).map((function(t){return e.getRndHexColor()}));return{labels:Object.keys(t),datasets:[{label:"# of Cards",data:Object.values(t),backgroundColor:a,hoverBackgroundColor:a}]}},e.dashboardNumbers=function(e){if(e&&e.members&&e.groups){var t=e.members.length,a=0,r=0;e.groups.forEach((function(e){var t=e.cards.filter((function(e){return e.archivedAt}));r+=t.length,a+=e.cards.length-t.length}));var n=e.groups.reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t.cards))}),[]).reduce((function(e,t){return t.checklist?(t.checklist.forEach((function(t){t.todos.forEach((function(t){t.isDone&&e.checked++,e.total++}))})),e):e}),{checked:0,total:0});return n.checked/n.total>.75&&(n.colorClass="todos-green"),n.checked/n.total<=.5&&(n.colorClass="todos-red"),{numOfMembers:t,archivedCardsCount:r,unarchivedCardsCount:a,todosCount:n}}},e.cardsByGroups=function(t){if(t){var a=t.reduce((function(e,t){var a=t.cards.filter((function(e){return!e.archivedAt}));return e[t.title]=a.length,e}),{});return e.getDataForChart(a)}},e.cardsByMembers=function(t){if(t.members){var a=t.members.reduce((function(e,a){for(var r=0,n=0;n<t.groups.length;n++)for(var s=t.groups[n].cards.filter((function(e){return!e.archivedAt})),c=0;c<s.length;c++)s[c].members.some((function(e){return e._id===a._id}))&&r++;return e[a.fullname]=r,e}),{});return{data:e.getDataForChart(a),options:{legend:{display:!1},scales:{xAxes:[{ticks:{beginAtZero:!0,min:0}}]}}}}},e.cardsByLabels=function(e,t){if(e&&t){var a={green:"#61bd50",yellow:"#f1d600",orange:"#ff9f1a",red:"#eb5a47",purple:"#c377e1",blue:"#0079be",grey:"#838c91",black:"#202020"},r=e.reduce((function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t.cards))}),[]);r=r.filter((function(e){return!e.archivedAt}));var n=t.reduce((function(e,t){var a=0;return r.forEach((function(e){e.labels.some((function(e){return e.id===t.id}))&&a++})),e[t.id]={name:t.name,color:t.color,count:a},e}),{});return{data:{labels:Object.keys(n).map((function(e){return n[e].name})),datasets:[{label:"# of Labels",borderWidth:1,backgroundColor:Object.keys(n).map((function(e){return a[n[e].color]})),strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:Object.keys(n).map((function(e){return n[e].count}))}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,min:0}}]}}}}},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.board;if(!a)return Object(K.jsxs)("div",{className:"loader-page",children:[" ",Object(K.jsx)("img",{src:$,alt:"loading..."})]});var r=this.dashboardNumbers(a),n=this.cardsByGroups(a.groups),s=this.cardsByMembers(a),c=this.cardsByLabels(a.groups,a.labels);return a?Object(K.jsxs)("div",{className:"page-container",style:{backgroundImage:"url(".concat(null===a||void 0===a||null===(e=a.style)||void 0===e?void 0:e.bgImg,")")},children:[Object(K.jsx)("div",{className:"fade-analisys"}),Object(K.jsxs)("h3",{className:"analysis-title",children:[" ",a.title," : Data Analysis"]}),Object(K.jsx)("div",{className:"home-nav"}),Object(K.jsxs)("div",{className:"analysis-dashboard-container",children:[r&&Object(K.jsxs)("div",{className:"chart-container summary-numbers-conatiner",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"Total Members"}),Object(K.jsx)("h3",{children:r.numOfMembers})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"Cards On Board"}),Object(K.jsxs)("h3",{children:[r.unarchivedCardsCount,Object(K.jsx)("span",{className:"total",children:" (".concat(r.archivedCardsCount," archived)")})]})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"To-Dos Checked"}),Object(K.jsxs)("h3",{className:r.todosCount.colorClass,children:["".concat(r.todosCount.checked),Object(K.jsx)("span",{className:"total",children:" /".concat(r.todosCount.total)})]})]})]}),Object(K.jsxs)("div",{className:"charts",children:[s&&Object(K.jsxs)("div",{className:"chart-container cards-by-member-container",children:[Object(K.jsx)("h3",{children:"Cards Per Member"}),Object(K.jsx)("div",{className:"data",children:Object(K.jsx)(Xe.a,{data:s.data,options:s.options})})]}),n&&Object(K.jsxs)("div",{className:"chart-container cards-by-group-container",children:[Object(K.jsx)("h3",{children:"Cards Per Group"}),Object(K.jsx)("div",{className:"data",children:Object(K.jsx)(Xe.b,{data:n})})]}),c&&Object(K.jsxs)("div",{className:"chart-container cards-by-labels-container",children:[Object(K.jsx)("h3",{children:"Labels Summary"}),Object(K.jsx)("div",{className:"data",children:Object(K.jsx)(Xe.a,{data:c.data,options:c.options})})]})]}),Object(K.jsx)("button",{className:"chart-container-btn",onClick:function(){return t.props.history.push("/board/")},children:"Go Back"})]})]}):Object(K.jsx)("div",{children:"Loading..."})}}]),a}(r.Component),Ze={loadBoard:A},$e=[{path:"/",component:function(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"homepage",children:[Object(K.jsx)("div",{className:"home-nav"}),Object(K.jsx)("p",{className:"home-subtitle",children:"Secure Task Management for Teams"}),Object(K.jsxs)("div",{className:"home-title",children:["Your Team. ",Object(K.jsx)("span",{children:"Aligned."})]}),Object(K.jsxs)(V.c,{to:"/boards",children:[" ",Object(K.jsx)("button",{className:"home-btn",children:"Start your first project "})," "]}),Object(K.jsx)("div",{className:"main-img-home"})]}),Object(K.jsxs)("div",{className:"call-to-action",children:[Object(K.jsxs)("div",{className:"home-subtitle",children:[Object(K.jsx)("p",{className:"home-subtitle-a",children:"The Need for Task Management"}),Object(K.jsx)("div",{className:"home-title-a",children:"It\u2019s Time to Get Organized."})]}),Object(K.jsxs)("div",{className:"content",children:[Object(K.jsx)("h2",{className:"subheading",children:"Task Management with MeisterTask"}),Object(K.jsx)("div",{className:"sub",children:"Projects That Work."}),Object(K.jsx)("p",{className:"intro",children:"Whether you're managing your next big project or digitalizing task management for your team's daily business, you need to know who\u2019s doing what, when. MeisterTask helps you manage tasks in a beautiful, customizable environment that perfectly adapts to your needs."})]})]})]})}},{path:"/about",component:function(){return Object(K.jsx)("h1",{children:"About"})}},{path:"/boards/",component:We},{path:"/dashboard/:boardId?",component:Object(J.b)((function(e){return{board:e.boardModule.board}}),Ze)(Ye)},{path:"/board/:boardId?/:cardId?",component:Ke}],et=(a(350),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onDragEnd=function(t){var a=t.destination,r=t.source,n=t.draggableId,s=t.type;if(a&&(a.droppableId!==r.droppableId||a.index!==r.index)&&n){if("card"===s){var c=e.props.board.groups.findIndex((function(e){return e.id===r.droppableId})),d=e.props.board.groups.findIndex((function(e){return e.id===a.droppableId}));if(r.droppableId===a.droppableId){var l=e.props.board.groups.find((function(e){return e.id===r.droppableId})),u=l.cards.find((function(e){return e.id===n})),p=Array.from(l.cards);p.splice(r.index,1),p.splice(a.index,0,u);var b=Object(i.a)(Object(i.a)({},l),{},{cards:p}),h=Object(o.a)(e.props.board.groups);h[c]=b;var j=Object(i.a)(Object(i.a)({},e.props.board),{},{groups:h});return void e.props.updatePosition(j)}if(r.droppableId!==a.droppableId){var m=e.props.board.groups.find((function(e){return e.id===a.droppableId})),g=e.props.board.groups.find((function(e){return e.id===r.droppableId})),v=g.cards.find((function(e){return e.id===n})),f=g.cards.findIndex((function(e){return e.id===n})),O=Array.from(m.cards);v.currGroup.groupId=m.id,O.splice(a.index,0,v),g.cards.splice(f,1);var x=Object(o.a)(e.props.board.groups);x[c]=g,x[d].cards=O;var k=Object(i.a)(Object(i.a)({},e.props.board),{},{groups:x});e.props.updatePosition(k),e.props.updateBoard(k)}}if("group"!==s);else{var y=Array.from(e.props.board.groups),C=e.props.board.groups.find((function(e){return e.id===n}));y.splice(r.index,1),y.splice(a.index,0,C);var N=Object(i.a)(Object(i.a)({},e.props.board),{},{groups:y});e.props.updatePosition(N)}}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){S.setup()}},{key:"render",value:function(){return Object(K.jsx)(z.a,{onDragEnd:this.onDragEnd,children:Object(K.jsxs)(V.a,{children:[Object(K.jsx)(H,{board:this.props.board}),Object(K.jsx)("main",{children:$e.map((function(e){return Object(K.jsx)(Q.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})})}}]),a}(r.Component));var tt={updatePosition:function(e){return function(){var t=Object(j.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=JSON.parse(JSON.stringify(e)),a({type:"SET_BOARD",board:e}),t.next=5,D.updateBoard(r);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error updating board",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateBoard:P,loadBoard:A},at=Object(J.b)((function(e){return{board:e.boardModule.board}}),tt)(et),rt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,396)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},nt=(a(351),a(33)),st={board:null,boards:[]};var ct={users:[]};var ot=a(171),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nt.d,dt=Object(nt.c)({userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"SET_USER":case"SIGN_UP":case"LOGOUT_USER":return Object(i.a)(Object(i.a)({},e),{},{loggedinUser:t.user});default:return e}},boardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(i.a)(Object(i.a)({},e),{},{boards:t.boards});case"ADD_BOARD":return Object(i.a)(Object(i.a)({},e),{},{board:t.board,boards:[].concat(Object(o.a)(e.boards),[t.board])});case"SET_BOARD":return Object(i.a)(Object(i.a)({},e),{},{board:t.board});default:return e}}}),lt=Object(nt.e)(dt,it(Object(nt.a)(ot.a)));c.a.render(Object(K.jsx)(J.a,{store:lt,children:Object(K.jsx)(at,{})}),document.getElementById("root")),rt(),navigator.serviceWorker.register("./sw.js")}},[[352,1,2]]]);
//# sourceMappingURL=main.606baa22.chunk.js.map